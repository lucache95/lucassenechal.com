---
phase: 01-foundation-landing-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - next.config.ts
  - tsconfig.json
  - app/layout.tsx
  - app/globals.css
  - app/page.tsx
  - lib/supabase/server.ts
  - lib/supabase/client.ts
  - .env.local.example
  - supabase/migrations/001_subscribers.sql
autonomous: true
requirements: [SITE-07, SITE-08]

must_haves:
  truths:
    - "Next.js app starts with `npm run dev` and renders a page at localhost:3000"
    - "Tailwind CSS v4 classes apply correctly to elements"
    - "Supabase client can connect (server and client variants exist)"
    - "next.config.ts has standalone output configured"
    - "Geist font loads via next/font with zero layout shift"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies"
      contains: "next"
    - path: "next.config.ts"
      provides: "Next.js configuration with standalone output"
      contains: "standalone"
    - path: "app/layout.tsx"
      provides: "Root layout with font loading and metadata"
      contains: "Geist"
    - path: "app/globals.css"
      provides: "Tailwind v4 CSS directives and custom theme"
      contains: "@import"
    - path: "lib/supabase/server.ts"
      provides: "Server-side Supabase client"
      exports: ["createClient"]
    - path: "lib/supabase/client.ts"
      provides: "Client-side Supabase client"
      exports: ["createClient"]
    - path: "supabase/migrations/001_subscribers.sql"
      provides: "Subscribers table schema with RLS"
      contains: "CREATE TABLE subscribers"
  key_links:
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "CSS import"
      pattern: "import.*globals"
    - from: "lib/supabase/server.ts"
      to: "process.env.NEXT_PUBLIC_SUPABASE_URL"
      via: "environment variable"
      pattern: "process\\.env\\.NEXT_PUBLIC_SUPABASE"
---

<objective>
Set up the Next.js 15+ project with Tailwind CSS v4, Supabase integration, and Railway-ready configuration. This creates the foundation every subsequent plan builds on.

Purpose: All Phase 1 plans depend on this project scaffolding. Nothing can be built until the framework, styling, database client, and deployment config exist.
Output: A running Next.js app with Tailwind v4, Supabase server/client utilities, subscriber schema, and standalone output for Railway.
</objective>

<execution_context>
@/Users/lucassenechal/.claude/get-shit-done/workflows/execute-plan.md
@/Users/lucassenechal/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-landing-page/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold Next.js project with Tailwind v4 and core dependencies</name>
  <files>
    package.json
    next.config.ts
    tsconfig.json
    app/layout.tsx
    app/globals.css
    app/page.tsx
    .env.local.example
  </files>
  <action>
    Create a new Next.js 15+ project (latest stable) with TypeScript and Tailwind CSS in the `lucassenechal-website/` directory (or the project root if already in it):

    ```bash
    npx create-next-app@latest . --typescript --tailwind --app --src-dir=false --import-alias="@/*" --turbopack
    ```

    After scaffolding:

    1. **next.config.ts** — Add `output: 'standalone'` for Railway deployment. Keep TypeScript config format.

    2. **app/layout.tsx** — Configure root layout:
       - Import Geist Sans and Geist Mono from `next/font/google` (or `geist` package if bundled with Next.js)
       - Apply font CSS variables to `<html>` element
       - Set `<html lang="en">` with light theme only (no dark mode)
       - Add comprehensive metadata: title "Lucas Senechal — Your Daily Edge", description about personalized AI newsletter
       - Add OpenGraph metadata for social sharing

    3. **app/globals.css** — Set up Tailwind v4 with custom theme:
       - Use `@import "tailwindcss"` (v4 syntax, not v3 `@tailwind` directives)
       - Define custom color palette using `@theme` block — extract a sophisticated palette inspired by reference sites (Resend, Linear, ready.so): neutral grays for text, a warm accent color, clean whites. Think slate/zinc grays with a subtle warm primary.
       - Set `font-family` to use the Geist variable font
       - Add smooth scrolling on html element

    4. **app/page.tsx** — Create a minimal placeholder page that confirms the stack works. Show "Lucas Senechal" heading with Tailwind classes to verify styling works. This will be replaced in Plan 02.

    5. **.env.local.example** — Create example env file with all required variables (commented descriptions):
       ```
       NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
       NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
       SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
       RESEND_API_KEY=your-resend-api-key
       ```

    Install additional dependencies:
    ```bash
    npm install @supabase/ssr @supabase/supabase-js framer-motion resend
    ```

    **Important:** Do NOT use `NEXT_PUBLIC_` prefix for server-only secrets (SUPABASE_SERVICE_ROLE_KEY, RESEND_API_KEY). Only SUPABASE_URL and ANON_KEY get the public prefix.
  </action>
  <verify>
    Run `npm run dev` and confirm the page loads at http://localhost:3000. Verify Tailwind classes render correctly (check the heading has proper styling). Run `npm run build` to confirm standalone output generates without errors. Check that `package.json` contains next, @supabase/ssr, @supabase/supabase-js, framer-motion, resend.
  </verify>
  <done>
    Next.js app runs locally with Tailwind v4 styling applied, Geist font loading, standalone build succeeds, all dependencies installed. `.env.local.example` documents all required environment variables.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Supabase clients and subscriber schema</name>
  <files>
    lib/supabase/server.ts
    lib/supabase/client.ts
    supabase/migrations/001_subscribers.sql
  </files>
  <action>
    1. **lib/supabase/server.ts** — Create server-side Supabase client using `@supabase/ssr`:
       ```typescript
       import { createServerClient } from '@supabase/ssr'
       import { cookies } from 'next/headers'

       export async function createClient() {
         const cookieStore = await cookies()
         return createServerClient(
           process.env.NEXT_PUBLIC_SUPABASE_URL!,
           process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
           {
             cookies: {
               getAll() { return cookieStore.getAll() },
               setAll(cookiesToSet) {
                 cookiesToSet.forEach(({ name, value, options }) =>
                   cookieStore.set(name, value, options)
                 )
               },
             },
           }
         )
       }
       ```

    2. **lib/supabase/client.ts** — Create browser-side Supabase client:
       ```typescript
       import { createBrowserClient } from '@supabase/ssr'

       export function createClient() {
         return createBrowserClient(
           process.env.NEXT_PUBLIC_SUPABASE_URL!,
           process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
         )
       }
       ```

    3. **supabase/migrations/001_subscribers.sql** — Create subscribers table with RLS:
       ```sql
       CREATE TABLE subscribers (
         id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
         email TEXT UNIQUE NOT NULL,
         status TEXT NOT NULL DEFAULT 'pending',
         created_at TIMESTAMPTZ DEFAULT now() NOT NULL,
         confirmed_at TIMESTAMPTZ,
         unsubscribed_at TIMESTAMPTZ
       );

       CREATE INDEX idx_subscribers_email ON subscribers(email);
       CREATE INDEX idx_subscribers_status ON subscribers(status);

       ALTER TABLE subscribers ENABLE ROW LEVEL SECURITY;

       -- Allow anonymous insert for email capture from landing page
       CREATE POLICY "Allow public insert" ON subscribers
         FOR INSERT TO anon WITH CHECK (true);

       -- Deny all other anonymous access
       CREATE POLICY "Deny public read" ON subscribers
         FOR SELECT TO anon USING (false);

       CREATE POLICY "Deny public update" ON subscribers
         FOR UPDATE TO anon USING (false);

       CREATE POLICY "Deny public delete" ON subscribers
         FOR DELETE TO anon USING (false);

       -- Allow service_role full access (for server-side operations)
       CREATE POLICY "Service role full access" ON subscribers
         FOR ALL TO service_role USING (true) WITH CHECK (true);
       ```

    This schema is intentionally minimal for Phase 1 (email capture only). Phase 2 will extend it with topics, preferences, format choice, etc.
  </action>
  <verify>
    Verify `lib/supabase/server.ts` exports `createClient` function. Verify `lib/supabase/client.ts` exports `createClient` function. Verify the SQL migration file exists and contains CREATE TABLE, indexes, and RLS policies. Run `npm run build` to confirm no TypeScript errors in the Supabase client files.
  </verify>
  <done>
    Server and client Supabase utilities exist and compile without errors. Subscribers schema SQL is ready to execute against a Supabase project. RLS policies restrict anonymous access to INSERT-only.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts successfully and page loads at localhost:3000
2. `npm run build` succeeds with standalone output (check `.next/standalone/` exists)
3. Tailwind classes apply correctly on the placeholder page
4. Geist font loads (inspect computed font-family in browser)
5. Both Supabase client files compile without TypeScript errors
6. SQL migration file has proper table definition with RLS
</verification>

<success_criteria>
- Running Next.js 15+ app with App Router
- Tailwind v4 with custom color theme applied
- Geist font loaded via next/font
- Standalone output configured in next.config.ts
- Supabase server and client utilities ready
- Subscribers table schema with RLS policies defined
- All dependencies installed (framer-motion, resend, @supabase/ssr)
- .env.local.example documents all required variables
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-landing-page/01-01-SUMMARY.md`
</output>
